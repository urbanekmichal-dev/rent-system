# Rent - system application
## Table of contents
* [General info](#general-info)
* [Technologies](#technologies)
* [Setup](#setup)
* [Example cURLs](#example-cURLs)
* [Example SQL scripts](#example-SQL-scripts)
## General info
## Technologies
* Java 8 
* Spring Boot 2.7
## Dependencies
* Lombok
* Spring Web
* Spring Data JPA
* MapStruct
* H2 Database
* Mockito
## Setup
Rent - system is a Spring Boot application built using Maven. You can build a jar file and run it from the command line :
~~~
git clone https://github.com/urbanekmichal-dev/rent-system.git
cd rent-system
mvnw package
java -jar target/rentsystem-v.0.1.jar.jar
~~~
You can then access rent-system here: http://localhost:8082/
## Example cURLs 
* Add a new tenant to the system
~~~
curl --location --request POST 'http://localhost:8082/tenants/' \
--header 'Content-Type: application/json' \
--data-raw '{
    "name":"Michael"
}'
~~~
* Add a new landlord to the system
~~~
curl --location --request POST 'http://localhost:8082/landlords/' \
--header 'Content-Type: application/json' \
--data-raw '{
    "name":"Chris"
}'
~~~
* Add a new rent object to the system
~~~
curl --location --request POST 'http://localhost:8082/rentobjects/' \
--header 'Content-Type: application/json' \
--data-raw '{
    "name":"House",
    "price": 120,
    "area": 100,
    "description": "Small house in city center"
}'
~~~
* Add a new reservation to the system
~~~
curl --location --request POST 'http://localhost:8082/reservations/' \
--header 'Content-Type: application/json' \
--data-raw '{
    "startDate": "2016-03-25",
    "endDate": "2016-03-29",
    "rentObjectName": "House",
    "landlordName": "Chris",
    "tenantName": "Michael"
}'
~~~
* Get list of reservation by tenant name
~~~
curl --location --request GET 'http://localhost:8082/reservations/tenant?name=Michael'
~~~
* Get list of reservation by rent object name
~~~
curl --location --request GET 'http://localhost:8082/reservations/rentobject?name=House'
~~~
* Update reservation
~~~
curl --location --request PUT 'http://localhost:8082/reservations/?id=1' \
--header 'Content-Type: application/json' \
--data-raw '{
    "startDate": "2016-03-10",
    "endDate": "2016-03-12",
    "rentObjectName": "Room",
    "landlordName": "Jonatan",
    "tenantName": "Andy"
}'
~~~
## Example SQL scripts
### schema.sql
~~~
create table land_lords (id bigint generated by default as identity, name varchar(255), primary key (id));
create table rent_object (id bigint generated by default as identity, area double, description varchar(255), name varchar(255), price double, primary key (id));
create table reservations (id bigint generated by default as identity, end_date date, final_price double, start_date date, land_lord_id bigint, rent_object_id bigint, tenant_id bigint, primary key (id));
create table tenant (id bigint generated by default as identity, name varchar(255), primary key (id));
alter table reservations add constraint land_lord_fk foreign key (land_lord_id) references land_lords;
alter table reservations add constraint rent_object_fk foreign key (rent_object_id) references rent_object;
alter table reservations add constraint tenant_id_fk foreign key (tenant_id) references tenant;
~~~
### data.sql
~~~
INSERT INTO land_lords (name) values ('Julia');
INSERT INTO land_lords (name) values ('Martin');
INSERT INTO land_lords (name) values ('Jacob');
INSERT INTO land_lords (name) values ('Chris');

INSERT INTO tenant (name) values ('Piter');
INSERT INTO tenant (name) values ('Christian');
INSERT INTO tenant (name) values ('Marry');
INSERT INTO tenant (name) values ('Lukas');
INSERT INTO tenant (name) values ('Michael');

INSERT INTO rent_object (area,description,name,price) values (150,'Little house in the city center','House',120);
INSERT INTO rent_object (area,description,name,price) values (10,'Small studio below the stairs','Room',50);
INSERT INTO rent_object (area,description,name,price) values (80,'The apartment on the first floor','Apartment',300);
INSERT INTO rent_object (area,description,name,price) values (500,'A large castle with a princess','Castle',1500);

INSERT INTO reservations (end_date, final_price,start_date,land_lord_id,rent_object_id,tenant_id) values ('2016-03-25',120,'2016-03-25',1,1,1);
INSERT INTO reservations (end_date, final_price,start_date,land_lord_id,rent_object_id,tenant_id) values ('2016-03-25',120,'2016-03-25',1,2,1);
INSERT INTO reservations (end_date, final_price,start_date,land_lord_id,rent_object_id,tenant_id) values ('2016-03-25',120,'2016-03-25',1,3,1);
INSERT INTO reservations (end_date, final_price,start_date,land_lord_id,rent_object_id,tenant_id) values ('2016-03-25',120,'2016-03-25',1,4,1);
~~~